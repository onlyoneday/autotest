*** Settings ***

Documentation   新建应用
Resource        ../common/resources.txt
Resource        ../common/app_resources.txt
Suite Setup     Open Browser And Login Mmj
Test Setup      Go To Page   ${APP_MY URL}
Test Template   Deploy App
Suite Teardown  Close All Browsers

*** Test Cases ***   Network     forceImage    edhc     status

app_c_02,04,06,12    ${EMPTY}    ${EMPTY}      0010     Deploying
app_c_05,07,09-11    stackHost   image         1101     Running

*** Keywords ***

Deploy App  [Arguments]   ${network}   ${forceImage}   ${edhc}   ${status}   
    #新建应用
    Click And Wait    stackCreate
    #输入最简参数
    ${name} =   Input Simple App
    #强制拉取镜像
    Run Keyword If   '${forceImage}' == 'image'    Click Element  forceImage
    #选择网络模式
    Run Keyword If   '${network}' == 'stackHost'   Click Element  stackHost
    #输入高级设置
    Input Advanced App  ${aedhc}
    #等待应用发布
    Click And Wait    stackFormCreate
    Sleep    ${SLEEP LONG TIME} 
    #验证应用是否部署成功
    ${app name} =     Get Text   //*[@id="stackListApp"]/tbody/tr[1]/td[1]
    Should Be Equal As Strings   ${app name}     ${name}
    ${app status} =   Get Text   //*[@id="stackListApp"]/tbody/tr[1]/td[3]
    Should Be Equal As Strings   ${app status}   ${status}
    #删除该应用（避免垃圾数据）
    Delete App From Button
