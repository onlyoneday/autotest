*** Settings ***

Documentation   新建应用json-验证试试看模板
Resource        ../common/resources.txt
Resource        ../common/app_resources.txt
Suite Setup     Open Browser And Login Mmj
Test Setup      Go To Page   ${APP_MY URL}
Test Template   Verify Json Template
Suite Teardown  Close All Browsers

*** Test Cases ***    template         

#app_c_23              stackSimpleModel
#app_c_23,27           stackAdvancedModel 

*** Keywords ***

Verify Json Template    [Arguments]   ${template}
    #新建应用
    Click And Wait    stackCreate
    #切换到json模式
    Click And Wait    css=md-tab-item:nth-child(2)
    #试试看
    Click Element     stackTrySee
    Click And Wait    ${template}
    #去表单模式选择集群
    Click And Wait    css=md-tab-item:nth-child(1) 
    Click Element     //*[@name="staticForm"]/div/div/div/md-select
    Click And Wait    //*[@value="clustermmj"]
    #切换到json模式
    Click And Wait    css=md-tab-item:nth-child(2)
    #等待应用发布
    Click And Wait    stackJsonCreate
    Sleep   ${SLEEP LONG TIME} 
    #验证应用是否部署成功    
    ${app name} =     Get Text      //*[@id="stackListApp"]/tbody/tr[1]/td[1]
    Should Contain    ${app name}   template
    ${app status} =   Get Text      //*[@id="stackListApp"]/tbody/tr[1]/td[4]
    Should Be Equal As Strings      ${app status}   Running
    #删除该应用（避免垃圾数据）
    Delete App From Button
