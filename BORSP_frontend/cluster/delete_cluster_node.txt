*** Settings ***

Documentation   删除集群/主机
Resource        ../common/resources.txt
Resource        ../common/cluster_resources.txt
Resource        ../common/app_resources.txt
Suite Setup     Open Browser And Login Adm
Test Setup      Go To Page   ${HOME URL}
Suite Teardown  Close All Browsers

*** Test Cases ***

G-104集群上有主机无应用
	Enter Cluster     ${MMJ CLUSTER}
	Click Element     delete-cluster
	Page Should Contain  集群内有主机的时候不能删除集群

Deploy App Before Testing
	Go To Page        ${APP_CREATE URL} 
	Create App        ${TEST APP}    ${MMJ CLUSTER}
    Click Element	  stackFormCreate

G-105集群上有主机有应用
	Enter Cluster     ${MMJ CLUSTER}
	Click And Wait    delete-cluster
	Page Should Contain  集群内有应用的时候不能删除集群
	Page Should Contain  集群内有主机的时候不能删除集群

G-116取消删除主机
	Enter Cluster     ${MMJ CLUSTER}
	Click Element     node-detail-list-del0
	Click Element     css=md-dialog > md-dialog-actions > button:nth-child(1)
	${row1} =         Get Matching Xpath Count    //table/tbody/tr[*]
	Run Keyword If    ${row1} == ${0}    Fail

G-115删除任意集群的任意主机
	Enter Cluster     ${MMJ CLUSTER}
	${nodeip} =       Get Text  //table/tbody/tr[1]/td[2]/a
	Delete Node       0
	Wait Until Page Does Not Contain  ${nodeip}  timeout=${LONG TIME}
	#应用挂掉
	Go To Page          ${APP_MY URL} 
	${status} =         Get Text  //*[@id='stackListApp']/tbody/tr[1]/td[4]
	Should Not Be Equal As Strings  ${status}  Running
	Delete App By Name  ${TEST APP} 

Add Node After Testing
	Add Cluster Node    ${MMJ CLUSTER}
	Select Cluster Node

