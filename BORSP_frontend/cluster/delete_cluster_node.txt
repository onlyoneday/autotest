*** Settings ***

Documentation   删除集群/主机
Resource        ../common/resources.txt
Resource        ../common/cluster_resources.txt
Suite Setup     Open Browser And Login Adm
Test Setup      Go To Page   ${HOME URL}
Suite Teardown  Close All Browsers

*** Test Cases ***

Add Node Before Testing
	Add Cluster Node  ${MMJ CLUSTER}
	Click Element     css=md-dialog-actions > button:nth-child(3)

#集群上有主机无应用
G-104
	${link} =         Evaluate   '//section/header/h3/a[text()='+'"${MMJ CLUSTER}"'+']'
	Click And Wait    ${link}
	Click Element     delete-cluster
	Click Element     css=md-dialog-actions > button:nth-child(2)
	Page Should Contain  不能删除集群

Deploy App Before Testing
	Go To Page        ${APP_CREATE URL} 
	Create App        ${TEST APP}    ${MMJ CLUSTER}
    Click Element	  stackFormCreate

#集群上有主机有应用
G-105
	${link} =         Evaluate   '//section/header/h3/a[text()='+'"${MMJ CLUSTER}"'+']'
	Click And Wait    ${link}
	Click Element     delete-cluster
	Click Element     css=md-dialog-actions > button:nth-child(2)
	Page Should Contain  不能删除集群

#取消删除主机
G-116
	Click Element     nodeSelectInstance0
	Click Element     cluster-nodes-delete 
	Click Element     css=md-dialog > md-dialog-actions > button:nth-child(1)
	${row1} =         Get Matching Xpath Count    //table/tbody/tr[*]
	Return From Keyword If   '${row1}' == ${0}    Fail

#删除任意集群的任意主机
G-115
	Delete Node  0
	${row1} =         Get Matching Xpath Count    //table/tbody/tr[*]
	Should Be Equal As Strings  ${row1}  0

Delete App After Testing
	Go To Page        ${APP_MY URL} 
	Delete App By Name   ${TEST APP} 



