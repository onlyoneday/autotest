*** Settings ***

Documentation   App test cases
Resource        ../common/resources.txt
Suite Setup     Open Browser And Login Mmj
Suite Teardown  Close Browser


*** Test Cases ***

Verify Cluster
    
    Go To Page   ${NODE URL}
	#验证主机信息
	${index} =    Get Matching Xpath Count   //*[@id="node-list"]/tbody/tr[*] 
	:FOR    ${li}   IN RANGE   ${index}
	\   ${li} =     Evaluate   ${li} + 1
	\   ${path3} =  Evaluate   '//*[@id="node-list"]/tbody/tr['+'${li}'+']/td[3]'
	\   ${path4} =  Evaluate   '//*[@id="node-list"]/tbody/tr['+'${li}'+']/td[4]'
	\   ${path6} =  Evaluate   '//*[@id="node-list"]/tbody/tr['+'${li}'+']/td[6]'
	\   ${role} =    Get Text   ${path3}
	\	${status} =  Get Text   ${path4}
	\	${mesos} =   Get Text   ${path6}
	\   Run Keyword If   ${li} == 1   Should Be Equal As Strings   ${role}   master
    \   ...              ELSE         Should Be Equal As Strings   ${role}   slave
    \   Run Keyword If   ${li} == 1   Should Be Equal As Strings   ${status}   leader
    \   ...              ELSE         Should Be Equal As Strings   ${status}   active
	\   Should Be Equal As Strings    ${mesos}   1.0.1
	#验证集群信息
    Click And Wait  css=md-pagination-wrapper > md-tab-item:nth-child(2)
    Page Should Contain   资源
    Page Should Contain   任务
    Page Should Contain   Slave
    #验证主机详情
    Click And Wait  css=md-pagination-wrapper > md-tab-item:nth-child(1)
    Click And Wait  xpath=//*[@id='node-list']/tbody/tr[1]/td[1]/a
    ${system} =     Get Text   node-detail-system
    ${container} =  Get Text   node-detail-container-running
    ${count} =      Get Matching Xpath Count   //*[@id="node-container-list"]/tbody/tr[*]    
    Should Be Equal As Strings   ${system}     CentOS Linux 7 (Core)
    Should Be Equal As Strings   ${container}  ${count} 
    #验证基本信息
    Click And Wait  css=md-pagination-wrapper > md-tab-item:nth-child(2)
    ${docker} =  Get Text   docker-info-version
    Should Be Equal As Strings   ${docker}    1.11.2
    Page Should Contain   Docker 信息
    Page Should Contain   主机信息
    Page Should Contain   服务信息
    #验证容器详情
    Click And Wait  css=md-pagination-wrapper > md-tab-item:nth-child(1)
    Click And Wait  xpath=//*[@id='node-container-list']/tbody/tr[1]/td[1]/a
    Page Should Contain   基础信息
    Page Should Contain   环境变量


