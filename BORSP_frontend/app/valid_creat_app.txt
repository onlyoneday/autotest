*** Settings ***

Documentation   App test cases
Resource        ../common/resources.txt
Resource        app_resources.txt
Suite Setup     Open Browser And Login Mmj
Test Setup      Click And Wait  stackCreate
Test Template   Deploy App
Suite Teardown  Close Browser


*** Test Cases ***   Network     forceImage    edhc

app_c_02,04,06,12    ${EMPTY}    ${EMPTY}      0010
app_c_05,07-11       stackHost   image         1101

*** Keywords ***

Deploy App  [Arguments]   ${network}   ${forceImage}   ${edhc}
    
    #输入最简参数
    ${app name} =   Input Simple App
    #强制拉取镜像
    Run Keyword If  '${forceImage}' == 'image'   Click Element  forceImage
    #选择网络模式
    Run Keyword If  '${network}' == 'stackHost'  Click Element  stackHost
    #输入高级设置
    Input Advanced App  ${edhc}
    
    #等待应用发布
    Click Element   stackFormCreate
    Sleep   ${SLEEP LONG TIME}
    #验证应用是否部署成功
    ${apname} =   Get Text  //*[@id="stackListApp"]/tbody/tr[1]/td[1]
    Should Be Equal As Strings   ${apname}   ${app name}
    #${status} =   Get Text  //*[@id="stackListApp"]/tbody/tr[1]/td[3]
    #Should Be Equal As Strings   ${status}   Running
    #删除该应用（避免垃圾数据）
    Click Element   //*[@id='stackListApp']/tbody/tr[1]/td[7]/md-menu/button
    Click Element   stackListDelete0
    Click And Wait  css=button:nth-child(2)>span.ng-binding
