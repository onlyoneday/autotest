*** Settings ***

Documentation  A test suite with a single test for registering successfully. 
Resource        ../common/resources.txt
Suite Setup     Open Browser And Login Mmj
Suite Teardown  Close All Browsers


*** Test Cases ***

Verify Create User

    ${email} =    Get Valid Email Adress
    #注册新用户
    Go To Page    ${USER_U URL}   
    Click Link    to-create-user
    Input Text    Email      ${email}
    Input Text    Password   ${MMJ PASSWD} 
    Click Button  submit-create-user
    Location Should Be       ${USER_U URL} 
    Page Should Contain      ${email}
    Logout
    #新用户登录
    Login  ${email}  ${MMJ PASSWD} 
    #注销新用户
    Go To Page    ${USER_U URL}  
    ${index} =    Get Matching Xpath Count   ${user list xpath}  
    ${cancel xpath} =   Evaluate   '//*[@id="user-list"]/tbody/tr['+'${index}'+']/td/button'
    Click Button  xpath=${cancel xpath}
    Logout
    #新用户登录
    Login  ${email}  ${MMJ PASSWD} 
    Location Should Be   ${LOGIN URL}

*** Keywords ***

Get Valid Email Adress
    ${email name} =    Generate Random String    6
    ${valid email} =   Evaluate  '${email name}'+'@test.com'
    [Return]    ${valid email}


*** Variables ***

${user list xpath}     //*[@id="user-list"]/tbody/tr[*]

